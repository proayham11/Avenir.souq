<script>
    // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© - ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù„ÙŠÙ‡Ø§
    let products = [
        {
            id: 1,
            name: "Ø³Ø§Ø¹Ø© Ø°ÙƒÙŠØ© ÙØ§Ø®Ø±Ø© - Ø§Ù„Ø¬ÙŠÙ„ Ø§Ù„Ø±Ø§Ø¨Ø¹",
            price: 349,
            category: "smart_devices",
            status: "active",
            description: "Ø³Ø§Ø¹Ø© Ø°ÙƒÙŠØ© Ù…ØªØ·ÙˆØ±Ø© Ù…Ø¹ Ø´Ø§Ø´Ø© AMOLED ÙˆØªØªØ¨Ø¹ ØµØ­ÙŠ Ù…ØªÙƒØ§Ù…Ù„",
            image: "",
            date: "2023-10-15"
        },
        {
            id: 2,
            name: "Ù„Ø§Ø¨ØªÙˆØ¨ ÙØ§Ø¦Ù‚ Ø§Ù„Ø£Ø¯Ø§Ø¡ - Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù…Ø­ØªØ±ÙÙŠÙ†",
            price: 1899,
            category: "computers",
            status: "active",
            description: "Ù„Ø§Ø¨ØªÙˆØ¨ Ù‚ÙˆÙŠ Ù„Ù„Ù…Ø­ØªØ±ÙÙŠÙ† Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬ i9 ÙˆØ°Ø§ÙƒØ±Ø© 32GB",
            image: "",
            date: "2023-10-10"
        }
    ];
    
    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¬Ø§Ù‡Ø²Ø©');
        
        // ØªØ£ÙƒØ¯ Ø£Ù† ÙƒÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ù…Ø®ÙÙŠØ©
        hideAllSections();
        document.getElementById('dashboardSection').style.display = 'block';
        
        // Ø±Ø¨Ø· Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        setupNavigation();
        
        // Ø±Ø¨Ø· Ø²Ø± Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬
        setupProductForm();
        
        // Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±
        setupImageUpload();
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        updateStats();
    });
    
    // Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
    function hideAllSections() {
        document.getElementById('dashboardSection').style.display = 'none';
        document.getElementById('addProductSection').style.display = 'none';
        document.getElementById('productsSection').style.display = 'none';
    }
    
    // Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª
    function setupNavigation() {
        // Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        document.getElementById('dashboardLink').addEventListener('click', function(e) {
            e.preventDefault();
            hideAllSections();
            document.getElementById('dashboardSection').style.display = 'block';
            document.getElementById('pageTitle').textContent = 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…';
            updateActiveLink(this);
        });
        
        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        document.getElementById('productsLink').addEventListener('click', function(e) {
            e.preventDefault();
            hideAllSections();
            document.getElementById('productsSection').style.display = 'block';
            document.getElementById('pageTitle').textContent = 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª';
            updateActiveLink(this);
            renderProductsTable();
        });
        
        // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬
        document.getElementById('addProductLink').addEventListener('click', function(e) {
            e.preventDefault();
            hideAllSections();
            document.getElementById('addProductSection').style.display = 'block';
            document.getElementById('pageTitle').textContent = 'Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯';
            updateActiveLink(this);
        });
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆÙ‚Ø¹
        document.getElementById('viewSiteLink').addEventListener('click', function(e) {
            e.preventDefault();
            window.open('index.html', '_blank');
        });
    }
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù†Ø´Ø·
    function updateActiveLink(clickedLink) {
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ù…Ù† ÙƒÙ„ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.classList.remove('active');
        });
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø´Ø§Ø· Ù„Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
        clickedLink.classList.add('active');
    }
    
    // Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±
    function setupImageUpload() {
        const fileUpload = document.querySelector('.file-upload');
        const imageInput = document.getElementById('productImage');
        const previewImage = document.getElementById('imagePreview');
        
        fileUpload.addEventListener('click', function() {
            imageInput.click();
        });
        
        imageInput.addEventListener('change', function() {
            if (this.files && this.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    previewImage.src = e.target.result;
                    previewImage.style.display = 'block';
                };
                reader.readAsDataURL(this.files[0]);
            }
        });
    }
    
    // â­â­â­â­ [Ø§Ù„Ø£Ù‡Ù…] Ø±Ø¨Ø· Ø²Ø± Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ â­â­â­â­
    function setupProductForm() {
        const productForm = document.getElementById('productForm');
        
        productForm.addEventListener('submit', function(e) {
            e.preventDefault(); // Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± ÙŠÙ…Ù†Ø¹ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
            
            // 1. Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            const productName = document.getElementById('productName').value;
            const productPrice = document.getElementById('productPrice').value;
            const productCategory = document.getElementById('productCategory').value;
            const productStatus = document.getElementById('productStatus').value;
            const productDescription = document.getElementById('productDescription').value;
            const productImage = document.getElementById('imagePreview').src;
            
            // 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
            if (!productName || !productPrice) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ ÙˆØ§Ù„Ø³Ø¹Ø±');
                return;
            }
            
            // 3. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù†ØªØ¬
            const newProduct = {
                id: Date.now(), // Ø±Ù‚Ù… ÙØ±ÙŠØ¯
                name: productName,
                price: parseFloat(productPrice),
                category: productCategory,
                status: productStatus,
                description: productDescription || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ',
                image: productImage || '',
                date: new Date().toLocaleDateString('ar-SA')
            };
            
            // 4. Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©
            products.push(newProduct);
            
            // 5. Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
            showToast('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­!');
            
            // 6. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            updateStats();
            
            // 7. Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            productForm.reset();
            document.getElementById('imagePreview').style.display = 'none';
            
            console.log('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯:', newProduct);
        });
    }
    
    // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„
    function renderProductsTable() {
        const tableBody = document.getElementById('productsTableBody');
        
        if (!tableBody) {
            console.error('Ø¹Ù†ØµØ± Ø§Ù„Ø¬Ø¯ÙˆÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
            return;
        }
        
        // ØªÙØ±ÙŠØº Ø§Ù„Ø¬Ø¯ÙˆÙ„
        tableBody.innerHTML = '';
        
        if (products.length === 0) {
            tableBody.innerHTML = `
                <tr>
                    <td colspan="6" style="text-align: center; padding: 40px; color: var(--text-secondary);">
                        <i class="fas fa-box-open" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                        Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª
                    </td>
                </tr>
            `;
            return;
        }
        
        // Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        products.forEach(product => {
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ø³Ù… Ø§Ù„ÙØ¦Ø©
            const categoryNames = {
                'smart_devices': 'Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø°ÙƒÙŠØ©',
                'phones_tablets': 'Ø§Ù„Ù‡ÙˆØ§ØªÙ ÙˆØ§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù„ÙˆØ­ÙŠØ©',
                'smart_home': 'Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ù†Ø²Ù„ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ©',
                'accessories': 'Ù…Ù„Ø­Ù‚Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©',
                'computers': 'Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±',
                'audio': 'Ø§Ù„ØµÙˆØªÙŠØ§Øª'
            };
            
            // Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯
            const productImage = product.image || 'https://via.placeholder.com/50/1E1E1E/888888?text=ØµÙˆØ±Ø©';
            
            // Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬
            let statusText = 'Ù†Ø´Ø·';
            let statusClass = 'active';
            if (product.status === 'inactive') {
                statusText = 'ØºÙŠØ± Ù†Ø´Ø·';
                statusClass = 'inactive';
            } else if (product.status === 'coming_soon') {
                statusText = 'Ù‚Ø±ÙŠØ¨Ø§Ù‹';
                statusClass = 'active';
            }
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØµÙ
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>
                    <div class="product-info">
                        <img src="${productImage}" class="product-img" alt="${product.name}">
                        <div>
                            <p style="font-weight: 500;">${product.name}</p>
                            <p style="font-size: 0.8rem; color: var(--text-secondary);">
                                ${product.description.substring(0, 50)}${product.description.length > 50 ? '...' : ''}
                            </p>
                        </div>
                    </div>
                </td>
                <td>${categoryNames[product.category] || product.category}</td>
                <td style="font-weight: 500; color: var(--accent);">$${product.price}</td>
                <td>
                    <span class="status ${statusClass}">${statusText}</span>
                </td>
                <td>${product.date}</td>
                <td>
                    <div class="actions">
                        <button class="action-btn edit-btn" onclick="editProduct(${product.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-btn delete-btn" onclick="deleteProduct(${product.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </td>
            `;
            tableBody.appendChild(row);
        });
    }
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
    function updateStats() {
        // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        document.getElementById('totalProducts').textContent = products.length;
        
        // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª
        const totalRevenue = products.reduce((total, product) => total + product.price, 0);
        document.getElementById('totalRevenue').textContent = `$${totalRevenue}`;
        
        // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø¢Ø®Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        const recentProductsDiv = document.getElementById('recentProducts');
        if (recentProductsDiv) {
            recentProductsDiv.innerHTML = '';
            const recentProducts = products.slice(-3).reverse(); // Ø¢Ø®Ø± 3 Ù…Ù†ØªØ¬Ø§Øª
            recentProducts.forEach(product => {
                const p = document.createElement('p');
                p.textContent = product.name;
                recentProductsDiv.appendChild(p);
            });
        }
    }
    
    // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬
    function editProduct(productId) {
        const product = products.find(p => p.id === productId);
        if (!product) return;
        
        // Ù…Ù„Ø¡ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        document.getElementById('productName').value = product.name;
        document.getElementById('productPrice').value = product.price;
        document.getElementById('productCategory').value = product.category;
        document.getElementById('productStatus').value = product.status;
        document.getElementById('productDescription').value = product.description;
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø³Ù…
        hideAllSections();
        document.getElementById('addProductSection').style.display = 'block';
        document.getElementById('pageTitle').textContent = 'ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬';
        
        // ØªØºÙŠÙŠØ± Ø²Ø± Ø§Ù„Ø­ÙØ¸
        const submitBtn = document.querySelector('#productForm button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-edit"></i> ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬';
        
        // Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« Ù…Ø¤Ù‚Øª
        const form = document.getElementById('productForm');
        const originalSubmit = form.onsubmit;
        
        form.onsubmit = function(e) {
            e.preventDefault();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬
            product.name = document.getElementById('productName').value;
            product.price = parseFloat(document.getElementById('productPrice').value);
            product.category = document.getElementById('productCategory').value;
            product.status = document.getElementById('productStatus').value;
            product.description = document.getElementById('productDescription').value;
            
            showToast('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­!');
            updateStats();
            renderProductsTable();
            
            // Ø¥Ø¹Ø§Ø¯Ø© ÙƒÙ„ Ø´ÙŠØ¡
            form.reset();
            document.getElementById('imagePreview').style.display = 'none';
            submitBtn.innerHTML = originalText;
            form.onsubmit = originalSubmit;
            
            // Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
            setTimeout(() => {
                hideAllSections();
                document.getElementById('productsSection').style.display = 'block';
            }, 1500);
        };
    }
    
    // Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬
    function deleteProduct(productId) {
        if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ')) {
            const index = products.findIndex(p => p.id === productId);
            if (index !== -1) {
                products.splice(index, 1);
                showToast('ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­');
                updateStats();
                renderProductsTable();
            }
        }
    }
    
    // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø±
    function showToast(message) {
        let toast = document.getElementById('toast');
        
        if (!toast) {
            toast = document.createElement('div');
            toast.id = 'toast';
            toast.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 20px;
                background-color: var(--secondary);
                color: var(--accent);
                padding: 15px 20px;
                border-radius: 8px;
                border-left: 5px solid var(--accent);
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                z-index: 1000;
                transform: translateX(-150%);
                transition: transform 0.5s;
                display: flex;
                align-items: center;
                gap: 10px;
            `;
            document.body.appendChild(toast);
        }
        
        toast.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
        toast.style.transform = 'translateX(0)';
        
        setTimeout(() => {
            toast.style.transform = 'translateX(-150%)';
        }, 3000);
    }
    
    // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    if (document.getElementById('searchProducts')) {
        document.getElementById('searchProducts').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            
            if (!searchTerm) {
                renderProductsTable();
                return;
            }
            
            const filtered = products.filter(product => 
                product.name.toLowerCase().includes(searchTerm) ||
                product.description.toLowerCase().includes(searchTerm) ||
                product.category.toLowerCase().includes(searchTerm)
            );
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙÙ„ØªØ±Ø©
            const tableBody = document.getElementById('productsTableBody');
            tableBody.innerHTML = '';
            
            filtered.forEach(product => {
                const categoryNames = {
                    'smart_devices': 'Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø°ÙƒÙŠØ©',
                    'phones_tablets': 'Ø§Ù„Ù‡ÙˆØ§ØªÙ ÙˆØ§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù„ÙˆØ­ÙŠØ©',
                    'smart_home': 'Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ù†Ø²Ù„ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ©',
                    'accessories': 'Ù…Ù„Ø­Ù‚Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©',
                    'computers': 'Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±',
                    'audio': 'Ø§Ù„ØµÙˆØªÙŠØ§Øª'
                };
                
                const productImage = product.image || 'https://via.placeholder.com/50/1E1E1E/888888?text=ØµÙˆØ±Ø©';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div class="product-info">
                            <img src="${productImage}" class="product-img" alt="${product.name}">
                            <div>
                                <p style="font-weight: 500;">${product.name}</p>
                                <p style="font-size: 0.8rem; color: var(--text-secondary);">
                                    ${product.description.substring(0, 50)}...
                                </p>
                            </div>
                        </div>
                    </td>
                    <td>${categoryNames[product.category] || product.category}</td>
                    <td style="font-weight: 500; color: var(--accent);">$${product.price}</td>
                    <td><span class="status active">Ù†Ø´Ø·</span></td>
                    <td>${product.date}</td>
                    <td>
                        <div class="actions">
                            <button class="action-btn edit-btn" onclick="editProduct(${product.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn delete-btn" onclick="deleteProduct(${product.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        });
    }
    
    console.log('Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù…Ø«Ø¨ØªØ© Ø¨Ù†Ø¬Ø§Ø­!');
    </script>